<!-- START OF FILE inventario_list.html -->

{% extends 'base.html' %}
{% block title %}Inventario - YosyFood{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="fw-bold text-lila">Inventario de Insumos</h2>
  <a href="{{ url_for('inventario_nuevo') }}" class="btn btn-lila">➕ Agregar Insumo</a>
</div>

<!-- Selector de Casino -->
<div class="d-flex justify-content-center mb-4">
  <div class="btn-group" role="group">
    <a href="{{ url_for('inventario_list', casino='Casino 1') }}" class="btn {% if casino == 'Casino 1' %}btn-lila{% else %}btn-outline-secondary{% endif %}">🏢 Casino 1</a>
    <a href="{{ url_for('inventario_list', casino='Casino 2') }}" class="btn {% if casino == 'Casino 2' %}btn-lila{% else %}btn-outline-secondary{% endif %}">🏢 Casino 2</a>
  </div>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    {% if items %}
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Código Barras</th>
            <th>Stock Actual</th>
            <th>Stock Mínimo</th>
            <th>Precio Venta</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for i in items %}
          <tr class="{{ 'table-danger' if i.cantidad < i.minimo }}">
            <td>{{ i.nombre }}</td>
            <td>{{ i.codigo_barras or 'N/A' }}</td>
            <td><strong>{{ i.cantidad | float }}</strong> {{ i.unidad }}</td>
            <td>{{ i.minimo | float }} {{ i.unidad }}</td>
            <td>${{ "%.2f"|format(i.precio) }}</td>
            <td>
              <a href="{{ url_for('inventario_editar', item_id=i.id) }}" class="btn btn-sm btn-outline-primary" title="Editar"><i class="bi bi-pencil-fill"></i></a>
              <form action="{{ url_for('inventario_eliminar', item_id=i.id) }}" method="POST" class="d-inline">
                <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('¿Estás seguro de que quieres eliminar este insumo?')" title="Eliminar"><i class="bi bi-trash-fill"></i></button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
      <div class="alert alert-info text-center">No hay insumos registrados para {{ casino }}. <a href="{{ url_for('inventario_nuevo') }}">¡Agrega el primero!</a></div>
    {% endif %}
  </div>
</div>
{% endblock %}